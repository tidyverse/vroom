PKG_CPPFLAGS=-Imio/include -DWIN32_LEAN_AND_MEAN -Ispdlog/include -DFMT_HEADER_ONLY \
	-Ilibvroom/include -Ilibvroom/third_party -Ilibvroom

# libvroom source files (excluding cli.cpp, arrow_output.cpp, libvroom_c.cpp)
LIBVROOM_SOURCES = \
	libvroom/src/branchless_state_machine.cpp \
	libvroom/src/dialect.cpp \
	libvroom/src/encoding.cpp \
	libvroom/src/error.cpp \
	libvroom/src/index_cache.cpp \
	libvroom/src/io_util.cpp \
	libvroom/src/libvroom_types.cpp \
	libvroom/src/mmap_util.cpp \
	libvroom/src/simd_dispatch.cpp \
	libvroom/src/simd_number_parsing.cpp \
	libvroom/src/streaming.cpp \
	libvroom/src/two_pass.cpp \
	libvroom/src/utf8.cpp \
	libvroom/src/value_extraction.cpp

# Highway source files
HIGHWAY_SOURCES = \
	libvroom/third_party/hwy/abort.cc \
	libvroom/third_party/hwy/aligned_allocator.cc \
	libvroom/third_party/hwy/per_target.cc \
	libvroom/third_party/hwy/targets.cc

LIBVROOM_OBJECTS = $(LIBVROOM_SOURCES:.cpp=.o)
HIGHWAY_OBJECTS = $(HIGHWAY_SOURCES:.cc=.o)

# vroom's own source files
VROOM_SOURCES = \
	Iconv.cpp LocaleInfo.cpp altrep.cc cpp11.cpp \
	delimited_index.cc delimited_index_connection.cc \
	fixed_width_index_connection.cc gen.cc grisu3.c guess_type.cc \
	iconv_file.cc index_collection.cc libvroom_index.cc vroom.cc vroom_big_int.cc \
	vroom_chr.cc vroom_date.cc vroom_dbl.cc vroom_dttm.cc \
	vroom_errors.cpp vroom_fct.cc vroom_fwf.cc vroom_int.cc \
	vroom_num.cc vroom_rle.cc vroom_time.cc vroom_write.cc

VROOM_OBJECTS = $(VROOM_SOURCES:.cpp=.o)
VROOM_OBJECTS := $(VROOM_OBJECTS:.cc=.o)
VROOM_OBJECTS := $(VROOM_OBJECTS:.c=.o)

OBJECTS = $(VROOM_OBJECTS) $(LIBVROOM_OBJECTS) $(HIGHWAY_OBJECTS)
